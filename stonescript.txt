var shouldHarvest
?loc.begin
    shouldHarvest = false

var offhandMode = "heal"

// var button
// func OnPressed()
//     shouldHarvest = !shouldHarvest
//     // Set button text
//     button.text = "Enable Harvesting"
//     ?!shouldHarvest
//         button.text = "Disable Harvesting"

// ?loc.begin
//     button = ui.AddButton()
//     button.y = 0
//     button.text = "Disable Harvesting"
//     button.SetPressed(OnPressed)


func equip_dash()
    equipL sword 
    equipR shield dashing

func offhand_stone()
    ?offhandMode = "heal"
        equipR ouroboros
    :?offhandMode = "xp"
        equipR experience
    :?offhandMode = "speed"
        equipR triskelion

// Default 
equipL triskelion
equipR ouroboros

?pickup.distance < 10
    equipL star

?loc = deadwood
    // ?hp < 7
    //     activate potion

    // Harvesting
    ?harvest.distance < 10 & shouldHarvest
        equip hatchet

    // Fighting
    ?foe.distance < 16
        // General
        ?foe = mosquito
            equipL vigor wand
            offhand_stone()
        :
            equipL sword
            equipR ouroboros
    
    // Boss
    ?foe = boss & foe.distance < 20
        equip blade

?loc = Caves

    // healing potions are infinite here
    ?loc.begin
        brew tar
    ?hp < 7
        activate potion

    ?foe.distance >= 16 & foe.distance < 20 
        ^& foe ! medium_bat
        equip_dash()

    // Fighting
    ?foe.distance < 16
        // General
        equipL vigor wand
        offhand_stone()

    // Boss
    ?foe = boss & foe.distance < 20

        ?foe.distance > 10
            equip_dash()
        :
            equip bardiche
            ?item.GetCooldown("bardiche") <= 0
                activate R

    

?loc = Mushroom
    // ?foe.distance >= 16 & foe.distance < 20
    //     equip_dash()

    ?foe.distance < 16
        ?foe = epic_snail | foe = colossal_snail 
            equip blade
        :
            equipL poison wand
            offhand_stone()

    // Boss
    ?foe = boss & foe.distance < 20
        // does this even work
        equipL poison wand
        equipR poison wand